---
phase: 01-infoplist-uti-fixes
plan: 02
type: execute
wave: 1
depends_on: []
files_modified: [Shared/SharedSettings.swift]
autonomous: true
---

<objective>
Fix silent encoding failures in CustomExtension saving.

Purpose: Prevent silent data loss when encoding custom extensions fails. Users/developers should see error logs instead of losing data without warning.
Output: Updated SharedSettings.swift with proper error handling.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-infoplist-uti-fixes/01-01-SUMMARY.md
@Shared/SharedSettings.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add error handling to customExtensions setter</name>
  <files>Shared/SharedSettings.swift</files>
  <action>
Replace the `try?` pattern with proper do/catch error handling in the `customExtensions` setter (lines 86-92).

Current code:
```swift
set {
    lock.withLock {
        if let data = try? JSONEncoder().encode(newValue) {
            userDefaults.set(data, forKey: "customExtensions")
        }
    }
}
```

Replace with:
```swift
set {
    lock.withLock {
        do {
            let data = try JSONEncoder().encode(newValue)
            userDefaults.set(data, forKey: "customExtensions")
        } catch {
            logger.error("Failed to encode custom extensions: \(error.localizedDescription)")
        }
    }
}
```

This preserves the existing behavior (still returns void, doesn't throw) but adds visibility into encoding failures via os.log.
  </action>
  <verify>Build succeeds: xcodebuild -project dotViewer.xcodeproj -scheme dotViewer -quiet build</verify>
  <done>customExtensions setter uses do/catch with error logging instead of try?</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Build succeeds without errors
- [ ] No new warnings introduced
- [ ] Error logging added to customExtensions setter
</verification>

<success_criteria>
- Silent `try?` replaced with do/catch error handling
- Encoding errors logged via logger.error()
- Build passes
- External API unchanged (setter still returns void)
</success_criteria>

<output>
After completion, create `.planning/phases/01-infoplist-uti-fixes/01-02-SUMMARY.md`
</output>
