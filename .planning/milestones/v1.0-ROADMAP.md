# Milestone v1.0: Bug-Fix Release

**Status:** SHIPPED 2026-01-19
**Phases:** 1-4
**Total Plans:** 9

## Overview

Fix all known bugs in dotViewer (5 user-reported + discovered issues) while maintaining stability, then optimize performance for a smooth user experience.

## Phases

### Phase 1: Foundation & UTI Fixes

**Goal**: Fix data integrity (encoding failures) and file type registration issues
**Depends on**: Nothing (first phase)
**Plans**: 3 plans

Plans:
- [x] 01-01: Add common dotfiles to QuickLook Info.plist UTI declarations
- [x] 01-02: Fix silent encoding failures in CustomExtension saving
- [x] 01-03: Fix .ts/.tsx QuickLook preview (investigate UTI priority vs Xcode)

**Details:**
- Added shell-dotfile UTI for common shell config files (.bashrc, .zshrc, .profile)
- Added git-dotfile UTI for git configuration files (.gitconfig, .gitignore)
- Fixed silent encoding failures with proper error logging
- Resolved TypeScript UTI priority conflict with Xcode

### Phase 2: UI Bug Fixes

**Goal**: Fix edit functionality for custom types, uninstall button styling, and markdown toggle
**Depends on**: Phase 1 (encoding fix required for custom extension work)
**Plans**: 3 plans

Plans:
- [x] 02-01: Add edit capability for custom file type extensions
- [x] 02-02: Apply destructive styling to uninstall button
- [x] 02-03: Fix markdown RAW mode toggle hiding content (pre-existing fix)

**Details:**
- Added edit sheet for custom file type extensions
- Applied .borderedProminent + .tint(.red) for destructive button styling
- Confirmed markdown toggle was already working (pre-existing fix)

### Phase 3: Performance & Syntax Highlighting

**Goal**: Fast syntax highlighting + comprehensive file type support
**Depends on**: Phase 2
**Plans**: 2 plans

Plans:
- [x] 03-01: FastSyntaxHighlighter (pure Swift regex-based highlighting)
- [x] 03-02: Comprehensive UTI declarations (100+ file extensions)

**Details:**
- Created FastSyntaxHighlighter - pure Swift regex-based syntax highlighter
- Zero external dependencies, supports 20+ languages
- Performance: <50ms for typical files (down from 1-2s with HighlightSwift)
- Added 100+ file extension UTI declarations
- Falls back to HighlightSwift for unsupported languages

### Phase 4: App Store Preparation

**Goal**: Re-enable sandbox for App Store distribution
**Depends on**: Phase 3
**Plans**: 1 plan

Plans:
- [x] 04-01: Enable App Sandbox and replace pluginkit with static setup guide

**Details:**
- Enabled App Sandbox (com.apple.security.app-sandbox: true)
- Replaced pluginkit-based ExtensionStatusChecker with sandbox-safe ExtensionHelper
- StatusView shows static setup guide with numbered steps
- No temporary exception entitlements (App Store compliant)

---

## Milestone Summary

**Key Decisions:**
- Pre-register common dotfiles in Info.plist (dynamic UTI registration too complex)
- Fix encoding failures before UI work (data integrity is foundational)
- Extension name not editable in edit sheet (serves as unique identifier)
- Skip QA phase (tested during development)
- Prioritize performance over App Store (user retention depends on fast previews)
- Abandon Syntect/Rust approach (3 failed integration attempts, complexity too high)
- Abandon Tree-sitter + Neon (similar complexity to Syntect)
- Implement FastSyntaxHighlighter (pure Swift regex approach, zero dependencies)
- Static setup guide instead of live status detection (no sandbox-friendly API exists)

**Issues Resolved:**
- Bug #1: Custom file types activate after being added
- Bug #2: Users can edit custom file types
- Bug #3: Uninstall button has proper destructive styling
- Bug #4: TypeScript/TSX QuickLook preview works
- Bug #5: Markdown RAW mode toggle doesn't hide content
- Silent encoding failures when saving custom extensions
- Performance: QuickLook preview now loads in <50ms (was 1-2s)

**Issues Deferred:**
- None

**Technical Debt Incurred:**
- HighlightSwift still included as fallback for unsupported languages

---

_For current project status, see .planning/ROADMAP.md_
